<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="http://localhost:3000/css/main.css">
    <title>Ледовые поля</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Antonio:wght@100&display=swap" rel="stylesheet">
</head>
<body bgcolor="#fff">
    <header id = "header" class="header">
        <div class="container">
            <div class="nav">
                <ul class = "menu">
                    <li>
                        <a href="index.php">
                            Ice fields
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </header>
<body>
    <section id = "about" class="about">
        <div class="container">
            <!-- считывание и разделение по переменным адресной строки -->
            <script>
                function getUrlVars() {
                    var vars = {};
                    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
                        vars[key] = value;
                    });
                    return vars;
                }
                
                var id_field = getUrlVars()["id_field"];
                let page = getUrlVars()["page"];
                var district = getUrlVars()["district"];
                var admArea = getUrlVars()["admArea"];
                var incompleteQuery = getUrlVars()["incompleteQuery"];
                var dictrict = getUrlVars()["dictrict"];
                var latitude = getUrlVars()["latitude"];
                var longitude = getUrlVars()["longitude"];
                console.log(page);
                console.log(id_field);  
            </script>
            <!-- подключение Яндекс.карт -->
            <div id="map-test" class="map"></div>
            <script src="https://api-maps.yandex.ru/2.1/?apikey=efc76c8c-1909-4c93-bc76-1cb1a2189cd6&lang=ru_RU">
            </script>
            <script>
                let center = [longitude,latitude];

                function init() {
                    let map = new ymaps.Map('map-test', {
                        center: center,
                        zoom: 15
                    });
                    // точка на карте с измененной иконкой.
                    let placemark = new ymaps.Placemark(center, {}, { 
                        iconLayout: 'default#image',
                        iconImageHref: 'https://cdn-icons-png.flaticon.com/512/2776/2776067.png',
                    });
                    
                    map.controls.remove('searchControl'); // удаляем поиск
                    map.controls.remove('trafficControl'); // удаляем контроль трафика
                    map.controls.remove('zoomControl'); // удаляем контрол зуммирования
                    map.controls.remove('rulerControl'); // удаляем контрол правил
                    map.geoObjects.add(placemark);
                }

                ymaps.ready(init); 
                document.write('<div class="mapLink"><a href=http://localhost:3000/information/addInfo.php?id=' + id_field + '&page=' + page + '&admArea=' + admArea + '&dictrict=' + dictrict + '&district=' + district + '&incompleteQuery=' + incompleteQuery +'>Вернуться к информации о ледовом поле</a></div>'); 
            </script>
        </div>
    </section>
    <footer id = "footer" class="footer">
        <div class="container">
            
        </div>
    </footer>
</body>
</html>